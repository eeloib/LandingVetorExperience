<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Limpa Rio Comunidade</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        
        .photo-preview {
            transition: all 0.3s ease;
        }
        
        .photo-preview:hover {
            transform: scale(1.05);
        }
        
        .form-section {
            border-left: 4px solid #3b82f6;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        
        .sidebar {
            background: linear-gradient(180deg, #1e40af 0%, #3730a3 100%);
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1);
        }
        
        .input-field {
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-full">
    <!-- Header -->
    <header class="bg-white shadow-lg border-b-4 border-blue-600">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-xl">üåä</span>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">Limpa Rio Comunidade</h1>
                        <p class="text-sm text-gray-600">Sistema de Reconhecimento S√≥cio Territorial</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-600" id="currentUser">Usu√°rio: Jo√£o Silva</span>
                    <button onclick="logout()" class="text-red-600 hover:text-red-800 text-sm font-medium">Sair</button>
                </div>
            </div>
        </div>
    </header>

    <div class="flex h-full">
        <!-- Sidebar -->
        <nav class="sidebar w-64 min-h-full p-6 hidden lg:block">
            <ul class="space-y-3">
                <li><button onclick="showSection('dashboard')" class="nav-btn w-full text-left text-white hover:bg-white hover:bg-opacity-20 px-4 py-3 rounded-lg transition-all">üìä Dashboard</button></li>
                <li><button onclick="showSection('nova-frente')" class="nav-btn w-full text-left text-white hover:bg-white hover:bg-opacity-20 px-4 py-3 rounded-lg transition-all">‚ûï Nova Frente</button></li>
                <li><button onclick="showSection('listar-frentes')" class="nav-btn w-full text-left text-white hover:bg-white hover:bg-opacity-20 px-4 py-3 rounded-lg transition-all">üìã Listar Frentes</button></li>
                <li><button onclick="showSection('relatorios')" class="nav-btn w-full text-left text-white hover:bg-white hover:bg-opacity-20 px-4 py-3 rounded-lg transition-all">üìà Relat√≥rios</button></li>
                <li><button onclick="showSection('usuarios')" class="nav-btn w-full text-left text-white hover:bg-white hover:bg-opacity-20 px-4 py-3 rounded-lg transition-all">üë• Usu√°rios</button></li>
            </ul>
        </nav>

        <!-- Mobile Menu Button -->
        <div class="lg:hidden fixed top-4 left-4 z-50">
            <button onclick="toggleMobileMenu()" class="bg-blue-600 text-white p-2 rounded-lg">
                <span id="menuIcon">‚ò∞</span>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div id="mobileMenu" class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 hidden">
            <nav class="sidebar w-64 h-full p-6">
                <ul class="space-y-3 mt-16">
                    <li><button onclick="showSection('dashboard'); toggleMobileMenu()" class="w-full text-left text-white hover:bg-white hover:bg-opacity-20 px-4 py-3 rounded-lg transition-all">üìä Dashboard</button></li>
                    <li><button onclick="showSection('nova-frente'); toggleMobileMenu()" class="w-full text-left text-white hover:bg-white hover:bg-opacity-20 px-4 py-3 rounded-lg transition-all">‚ûï Nova Frente</button></li>
                    <li><button onclick="showSection('listar-frentes'); toggleMobileMenu()" class="w-full text-left text-white hover:bg-white hover:bg-opacity-20 px-4 py-3 rounded-lg transition-all">üìã Listar Frentes</button></li>
                    <li><button onclick="showSection('relatorios'); toggleMobileMenu()" class="w-full text-left text-white hover:bg-white hover:bg-opacity-20 px-4 py-3 rounded-lg transition-all">üìà Relat√≥rios</button></li>
                    <li><button onclick="showSection('usuarios'); toggleMobileMenu()" class="w-full text-left text-white hover:bg-white hover:bg-opacity-20 px-4 py-3 rounded-lg transition-all">üë• Usu√°rios</button></li>
                </ul>
            </nav>
        </div>

        <!-- Main Content -->
        <main class="flex-1 p-4 lg:p-8 lg:ml-0 ml-0">
            <!-- Dashboard Section -->
            <div id="dashboard" class="section fade-in">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">Dashboard</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="card p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üèûÔ∏è</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">Frentes Cadastradas</p>
                                <p class="text-2xl font-bold text-gray-900" id="totalFrentes">24</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üèòÔ∏è</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">Comunidades Mapeadas</p>
                                <p class="text-2xl font-bold text-gray-900" id="totalComunidades">18</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üè´</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">Equipamentos P√∫blicos</p>
                                <p class="text-2xl font-bold text-gray-900" id="totalEquipamentos">142</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card p-6">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">üìä</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">Relat√≥rios Gerados</p>
                                <p class="text-2xl font-bold text-gray-900" id="totalRelatorios">8</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">√öltimas Frentes Cadastradas</h3>
                        <div class="space-y-4" id="ultimasFrentes">
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <p class="font-medium">Frente 166 - Rio Acari</p>
                                    <p class="text-sm text-gray-600">Bangu - 15/01/2024</p>
                                </div>
                                <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Conclu√≠do</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <p class="font-medium">Frente 167 - Rio Pavuna</p>
                                    <p class="text-sm text-gray-600">Pavuna - 14/01/2024</p>
                                </div>
                                <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">Em andamento</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">A√ß√µes R√°pidas</h3>
                        <div class="space-y-3">
                            <button onclick="showSection('nova-frente')" class="btn-primary w-full text-white px-4 py-3 rounded-lg font-medium">
                                ‚ûï Cadastrar Nova Frente
                            </button>
                            <button onclick="showSection('listar-frentes')" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-medium transition-all">
                                üìã Ver Todas as Frentes
                            </button>
                            <button onclick="showSection('relatorios')" class="w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-3 rounded-lg font-medium transition-all">
                                üìà Ver Relat√≥rios
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nova Frente Section -->
            <div id="nova-frente" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">Cadastrar Nova Frente de Trabalho</h2>
                
                <form id="frenteForm" class="space-y-8">
                    <!-- Dados B√°sicos -->
                    <div class="form-section p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-gray-900 mb-6">üìã Dados B√°sicos da Frente</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">C√≥digo da Frente</label>
                                <input type="text" name="codigo" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Ex: 166" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nome do Corpo H√≠drico</label>
                                <input type="text" name="corpoHidrico" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Ex: Rio Acari" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Data da Visita</label>
                                <input type="date" name="dataVisita" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Bairro/Localidade</label>
                                <input type="text" name="bairro" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Ex: Bangu" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Munic√≠pio</label>
                                <select name="municipio" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                    <option value="">Selecione o munic√≠pio</option>
                                    <option value="Rio de Janeiro">Rio de Janeiro</option>
                                    <option value="Niter√≥i">Niter√≥i</option>
                                    <option value="S√£o Gon√ßalo">S√£o Gon√ßalo</option>
                                    <option value="Duque de Caxias">Duque de Caxias</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Regi√£o Hidrogr√°fica</label>
                                <select name="regiaoHidrografica" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                    <option value="">Selecione a regi√£o</option>
                                    <option value="Ba√≠a de Guanabara">Ba√≠a de Guanabara</option>
                                    <option value="Ba√≠a de Sepetiba">Ba√≠a de Sepetiba</option>
                                    <option value="Lagoa Rodrigo de Freitas">Lagoa Rodrigo de Freitas</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Equipe -->
                    <div class="form-section p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-gray-900 mb-6">üë• Identifica√ß√£o da Equipe</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">T√©cnica Social</label>
                                <input type="text" name="tecnicaSocial" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Nome da t√©cnica social" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Encarregados</label>
                                <input type="text" name="encarregados" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Nomes dos encarregados">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Agentes Socioambientais</label>
                                <textarea name="agentesSocioambientais" rows="3" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Liste os agentes socioambientais"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Caracteriza√ß√£o da √Årea -->
                    <div class="form-section p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-gray-900 mb-6">üèòÔ∏è Caracteriza√ß√£o da √Årea</h3>
                        <div class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">H√° comunidade no entorno?</label>
                                    <select name="comunidadeEntorno" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="toggleComunidadeFields(this.value)">
                                        <option value="">Selecione</option>
                                        <option value="sim">Sim</option>
                                        <option value="nao">N√£o</option>
                                    </select>
                                </div>
                                <div id="nomeComunidadeDiv" class="hidden">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nome da Comunidade</label>
                                    <input type="text" name="nomeComunidade" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Nome da comunidade">
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Constru√ß√µes √†s margens?</label>
                                    <select name="construcoesMargens" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="toggleConstrucoesFields(this.value)">
                                        <option value="">Selecione</option>
                                        <option value="sim">Sim</option>
                                        <option value="nao">N√£o</option>
                                    </select>
                                </div>
                                <div id="tipoConstrucaoDiv" class="hidden">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Constru√ß√£o</label>
                                    <select name="tipoConstrucao" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option value="">Selecione</option>
                                        <option value="alvenaria">Alvenaria</option>
                                        <option value="taipa">Taipa</option>
                                        <option value="madeira">Madeira</option>
                                        <option value="outros">Outros</option>
                                    </select>
                                </div>
                                <div id="quantidadeMoradiasDiv" class="hidden">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Quantidade de Moradias</label>
                                    <input type="number" name="quantidadeMoradias" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="0">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Observa√ß√µes Gerais</label>
                                <textarea name="observacoesGerais" rows="4" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Descreva caracter√≠sticas da √°rea (rural/urbana, polui√ß√£o, dist√¢ncia, coleta de lixo, transporte, etc.)"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Equipamentos P√∫blicos -->
                    <div class="form-section p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-gray-900 mb-6">üè´ Levantamento de Equipamentos P√∫blicos</h3>
                        
                        <div class="space-y-8">
                            <!-- Escolas -->
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-4">üéì Escolas</h4>
                                <div id="escolasContainer">
                                    <div class="escola-item p-4 bg-white rounded-lg border mb-4">
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                            <input type="text" name="escola_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome da escola">
                                            <input type="text" name="escola_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                                            <select name="escola_segmento[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg">
                                                <option value="">Segmento</option>
                                                <option value="infantil">Educa√ß√£o Infantil</option>
                                                <option value="fundamental">Ensino Fundamental</option>
                                                <option value="medio">Ensino M√©dio</option>
                                            </select>
                                        </div>
                                        <div class="border-t pt-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos da Escola</label>
                                            <div class="flex items-center space-x-4">
                                                <input type="file" class="escola-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'escola', this)">
                                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                                    üì∑ Adicionar Fotos
                                                </button>
                                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                                            </div>
                                            <div class="escola-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" onclick="addEquipamento('escolas')" class="text-blue-600 hover:text-blue-800 font-medium">+ Adicionar Escola</button>
                            </div>

                            <!-- Unidades de Sa√∫de -->
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-4">üè• Unidades de Sa√∫de</h4>
                                <div id="saudeContainer">
                                    <div class="saude-item p-4 bg-white rounded-lg border mb-4">
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                            <input type="text" name="saude_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome da unidade">
                                            <input type="text" name="saude_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                                        </div>
                                        <div class="border-t pt-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos da Unidade de Sa√∫de</label>
                                            <div class="flex items-center space-x-4">
                                                <input type="file" class="saude-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'saude', this)">
                                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                                    üì∑ Adicionar Fotos
                                                </button>
                                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                                            </div>
                                            <div class="saude-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" onclick="addEquipamento('saude')" class="text-blue-600 hover:text-blue-800 font-medium">+ Adicionar Unidade de Sa√∫de</button>
                            </div>

                            <!-- Transporte P√∫blico -->
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-4">üöå Transporte P√∫blico</h4>
                                <div id="transporteContainer">
                                    <div class="transporte-item p-4 bg-white rounded-lg border mb-4">
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                            <input type="text" name="transporte_linha[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Linha/N√∫mero">
                                            <input type="text" name="transporte_empresa[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Empresa">
                                            <select name="transporte_tipo[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg">
                                                <option value="">Tipo</option>
                                                <option value="onibus">√înibus</option>
                                                <option value="van">Van</option>
                                                <option value="metro">Metr√¥</option>
                                                <option value="trem">Trem</option>
                                            </select>
                                        </div>
                                        <div class="border-t pt-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos do Transporte</label>
                                            <div class="flex items-center space-x-4">
                                                <input type="file" class="transporte-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'transporte', this)">
                                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-purple-100 hover:bg-purple-200 text-purple-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                                    üì∑ Adicionar Fotos
                                                </button>
                                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                                            </div>
                                            <div class="transporte-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" onclick="addEquipamento('transporte')" class="text-blue-600 hover:text-blue-800 font-medium">+ Adicionar Transporte</button>
                            </div>

                            <!-- √Åreas de Lazer -->
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-4">üèûÔ∏è √Åreas de Lazer</h4>
                                <div id="lazerContainer">
                                    <div class="lazer-item p-4 bg-white rounded-lg border mb-4">
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                            <input type="text" name="lazer_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome do local">
                                            <input type="text" name="lazer_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                                            <input type="text" name="lazer_descricao[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Descri√ß√£o">
                                        </div>
                                        <div class="border-t pt-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos da √Årea de Lazer</label>
                                            <div class="flex items-center space-x-4">
                                                <input type="file" class="lazer-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'lazer', this)">
                                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-orange-100 hover:bg-orange-200 text-orange-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                                    üì∑ Adicionar Fotos
                                                </button>
                                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                                            </div>
                                            <div class="lazer-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" onclick="addEquipamento('lazer')" class="text-blue-600 hover:text-blue-800 font-medium">+ Adicionar √Årea de Lazer</button>
                            </div>

                            <!-- Institui√ß√µes Religiosas -->
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-4">‚õ™ Institui√ß√µes Religiosas</h4>
                                <div id="religiosasContainer">
                                    <div class="religiosas-item p-4 bg-white rounded-lg border mb-4">
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                            <input type="text" name="religiosas_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome da institui√ß√£o">
                                            <input type="text" name="religiosas_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                                            <select name="religiosas_tipo[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg">
                                                <option value="">Tipo</option>
                                                <option value="igreja">Igreja</option>
                                                <option value="templo">Templo</option>
                                                <option value="centro">Centro Esp√≠rita</option>
                                                <option value="outros">Outros</option>
                                            </select>
                                        </div>
                                        <div class="border-t pt-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos da Institui√ß√£o Religiosa</label>
                                            <div class="flex items-center space-x-4">
                                                <input type="file" class="religiosas-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'religiosas', this)">
                                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                                    üì∑ Adicionar Fotos
                                                </button>
                                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                                            </div>
                                            <div class="religiosas-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" onclick="addEquipamento('religiosas')" class="text-blue-600 hover:text-blue-800 font-medium">+ Adicionar Institui√ß√£o Religiosa</button>
                            </div>

                            <!-- Associa√ß√µes de Moradores -->
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-4">üèòÔ∏è Associa√ß√µes de Moradores</h4>
                                <div id="associacoesContainer">
                                    <div class="associacoes-item p-4 bg-white rounded-lg border mb-4">
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                            <input type="text" name="associacoes_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome da associa√ß√£o">
                                            <input type="text" name="associacoes_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                                            <input type="text" name="associacoes_contato[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Contato">
                                        </div>
                                        <div class="border-t pt-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos da Associa√ß√£o</label>
                                            <div class="flex items-center space-x-4">
                                                <input type="file" class="associacoes-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'associacoes', this)">
                                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-teal-100 hover:bg-teal-200 text-teal-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                                    üì∑ Adicionar Fotos
                                                </button>
                                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                                            </div>
                                            <div class="associacoes-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" onclick="addEquipamento('associacoes')" class="text-blue-600 hover:text-blue-800 font-medium">+ Adicionar Associa√ß√£o</button>
                            </div>

                            <!-- Com√©rcios Locais -->
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-4">üè™ Com√©rcios Locais</h4>
                                <div id="comerciosContainer">
                                    <div class="comercios-item p-4 bg-white rounded-lg border mb-4">
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                            <input type="text" name="comercios_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome do com√©rcio">
                                            <input type="text" name="comercios_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                                            <select name="comercios_tipo[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg">
                                                <option value="">Tipo</option>
                                                <option value="mercado">Mercado</option>
                                                <option value="farmacia">Farm√°cia</option>
                                                <option value="padaria">Padaria</option>
                                                <option value="restaurante">Restaurante</option>
                                                <option value="outros">Outros</option>
                                            </select>
                                        </div>
                                        <div class="border-t pt-4">
                                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos do Com√©rcio</label>
                                            <div class="flex items-center space-x-4">
                                                <input type="file" class="comercios-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'comercios', this)">
                                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-yellow-100 hover:bg-yellow-200 text-yellow-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                                    üì∑ Adicionar Fotos
                                                </button>
                                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                                            </div>
                                            <div class="comercios-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" onclick="addEquipamento('comercios')" class="text-blue-600 hover:text-blue-800 font-medium">+ Adicionar Com√©rcio</button>
                            </div>
                        </div>
                    </div>

                    <!-- Upload de Fotos -->
                    <div class="form-section p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-gray-900 mb-6">üì∏ Upload de Fotos</h3>
                        <div class="space-y-4">
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
                                <input type="file" id="photoUpload" multiple accept="image/*" class="hidden" onchange="handlePhotoUpload(event)">
                                <button type="button" onclick="document.getElementById('photoUpload').click()" class="btn-primary text-white px-6 py-3 rounded-lg font-medium">
                                    üì∑ Selecionar Fotos
                                </button>
                                <p class="text-sm text-gray-600 mt-2">Selecione m√∫ltiplas imagens (JPG, PNG)</p>
                            </div>
                            <div id="photoPreview" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
                        </div>
                    </div>

                    <!-- Bot√µes de A√ß√£o -->
                    <div class="flex flex-col sm:flex-row gap-4 pt-6">
                        <button type="submit" class="btn-primary text-white px-8 py-3 rounded-lg font-medium flex-1">
                            üíæ Salvar Frente de Trabalho
                        </button>
                        <button type="button" onclick="limparFormulario()" class="bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-lg font-medium transition-all">
                            üóëÔ∏è Limpar Formul√°rio
                        </button>
                    </div>
                </form>
            </div>

            <!-- Listar Frentes Section -->
            <div id="listar-frentes" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">üìã Frentes Cadastradas</h2>
                
                <!-- Filtros -->
                <div class="card p-6 mb-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">üîç Filtros</h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <input type="text" id="filtroMunicipio" placeholder="Munic√≠pio" class="input-field px-4 py-2 border border-gray-300 rounded-lg">
                        <input type="date" id="filtroData" class="input-field px-4 py-2 border border-gray-300 rounded-lg">
                        <input type="text" id="filtroAgente" placeholder="Agente" class="input-field px-4 py-2 border border-gray-300 rounded-lg">
                        <button onclick="aplicarFiltros()" class="btn-primary text-white px-4 py-2 rounded-lg font-medium">Filtrar</button>
                    </div>
                </div>

                <!-- Lista de Frentes -->
                <div class="card">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">C√≥digo</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Corpo H√≠drico</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Munic√≠pio</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="frentesTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Dados ser√£o inseridos aqui via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Relat√≥rios Section -->
            <div id="relatorios" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">üìà Relat√≥rios e An√°lises</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">üìä Estat√≠sticas Gerais</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                                <span class="text-gray-700 font-medium">Total de Frentes:</span>
                                <span class="font-bold text-blue-600 text-xl" id="relatorioTotalFrentes">24</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                                <span class="text-gray-700 font-medium">Comunidades Identificadas:</span>
                                <span class="font-bold text-green-600 text-xl" id="relatorioTotalComunidades">18</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-purple-50 rounded-lg">
                                <span class="text-gray-700 font-medium">Equipamentos Mapeados:</span>
                                <span class="font-bold text-purple-600 text-xl" id="relatorioTotalEquipamentos">142</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-orange-50 rounded-lg">
                                <span class="text-gray-700 font-medium">Fotos Coletadas:</span>
                                <span class="font-bold text-orange-600 text-xl" id="relatorioTotalFotos">356</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card p-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">üìç Distribui√ß√£o por Munic√≠pio</h3>
                        <div class="space-y-3" id="distribuicaoMunicipios">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">Rio de Janeiro</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-20 bg-gray-200 rounded-full h-2">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: 85%"></div>
                                    </div>
                                    <span class="font-bold text-sm">20</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">Niter√≥i</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-20 bg-gray-200 rounded-full h-2">
                                        <div class="bg-green-600 h-2 rounded-full" style="width: 15%"></div>
                                    </div>
                                    <span class="font-bold text-sm">4</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Usu√°rios Section -->
            <div id="usuarios" class="section hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">üë• Gerenciamento de Usu√°rios</h2>
                
                <div class="card p-6 mb-8">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">‚ûï Adicionar Usu√°rio</h3>
                    <form id="usuarioForm" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <input type="text" name="nomeUsuario" placeholder="Nome completo" class="input-field px-4 py-2 border border-gray-300 rounded-lg" required>
                        <input type="email" name="emailUsuario" placeholder="E-mail" class="input-field px-4 py-2 border border-gray-300 rounded-lg" required>
                        <select name="perfilUsuario" class="input-field px-4 py-2 border border-gray-300 rounded-lg" required>
                            <option value="">Selecione o perfil</option>
                            <option value="tecnico">T√©cnico</option>
                            <option value="encarregado">Encarregado</option>
                            <option value="administrador">Administrador</option>
                        </select>
                        <button type="submit" class="btn-primary text-white px-4 py-2 rounded-lg font-medium md:col-span-3">Adicionar Usu√°rio</button>
                    </form>
                </div>

                <div class="card">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">E-mail</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Perfil</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="usuariosTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Dados ser√£o inseridos aqui via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Dados simulados
        let frentes = [
            {
                id: 1,
                codigo: '166',
                corpoHidrico: 'Rio Acari',
                municipio: 'Rio de Janeiro',
                bairro: 'Bangu',
                dataVisita: '2024-01-15',
                status: 'Conclu√≠do',
                tecnicaSocial: 'Maria Silva',
                comunidadeEntorno: 'sim',
                nomeComunidade: 'Vila Acari'
            },
            {
                id: 2,
                codigo: '167',
                corpoHidrico: 'Rio Pavuna',
                municipio: 'Rio de Janeiro',
                bairro: 'Pavuna',
                dataVisita: '2024-01-14',
                status: 'Em andamento',
                tecnicaSocial: 'Jo√£o Santos',
                comunidadeEntorno: 'sim',
                nomeComunidade: 'Comunidade da Pavuna'
            }
        ];

        let usuarios = [
            {
                id: 1,
                nome: 'Jo√£o Silva',
                email: 'joao.silva@limpa.rio',
                perfil: 'Administrador',
                status: 'Ativo'
            },
            {
                id: 2,
                nome: 'Maria Santos',
                email: 'maria.santos@limpa.rio',
                perfil: 'T√©cnico',
                status: 'Ativo'
            }
        ];

        let uploadedPhotos = [];

        // Navega√ß√£o
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(sectionId).classList.remove('hidden');
            document.getElementById(sectionId).classList.add('fade-in');
            
            // Atualizar dados quando necess√°rio
            if (sectionId === 'listar-frentes') {
                atualizarTabelaFrente();
            } else if (sectionId === 'usuarios') {
                atualizarTabelaUsuarios();
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            const icon = document.getElementById('menuIcon');
            
            if (menu.classList.contains('hidden')) {
                menu.classList.remove('hidden');
                icon.textContent = '‚úï';
            } else {
                menu.classList.add('hidden');
                icon.textContent = '‚ò∞';
            }
        }

        // Formul√°rio de frente
        function toggleComunidadeFields(value) {
            const div = document.getElementById('nomeComunidadeDiv');
            if (value === 'sim') {
                div.classList.remove('hidden');
            } else {
                div.classList.add('hidden');
            }
        }

        function toggleConstrucoesFields(value) {
            const tipoDiv = document.getElementById('tipoConstrucaoDiv');
            const quantDiv = document.getElementById('quantidadeMoradiasDiv');
            
            if (value === 'sim') {
                tipoDiv.classList.remove('hidden');
                quantDiv.classList.remove('hidden');
            } else {
                tipoDiv.classList.add('hidden');
                quantDiv.classList.add('hidden');
            }
        }

        function addEquipamento(tipo) {
            const container = document.getElementById(tipo + 'Container');
            let template = '';
            
            if (tipo === 'escolas') {
                template = `
                    <div class="escola-item p-4 bg-white rounded-lg border mb-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <input type="text" name="escola_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome da escola">
                            <input type="text" name="escola_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                            <select name="escola_segmento[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="">Segmento</option>
                                <option value="infantil">Educa√ß√£o Infantil</option>
                                <option value="fundamental">Ensino Fundamental</option>
                                <option value="medio">Ensino M√©dio</option>
                            </select>
                        </div>
                        <div class="border-t pt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos da Escola</label>
                            <div class="flex items-center space-x-4">
                                <input type="file" class="escola-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'escola', this)">
                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                    üì∑ Adicionar Fotos
                                </button>
                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                            </div>
                            <div class="escola-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                        </div>
                        <button type="button" onclick="this.parentElement.remove()" class="text-red-600 hover:text-red-800 text-sm mt-4">üóëÔ∏è Remover Escola</button>
                    </div>
                `;
            } else if (tipo === 'saude') {
                template = `
                    <div class="saude-item p-4 bg-white rounded-lg border mb-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <input type="text" name="saude_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome da unidade">
                            <input type="text" name="saude_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                        </div>
                        <div class="border-t pt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos da Unidade de Sa√∫de</label>
                            <div class="flex items-center space-x-4">
                                <input type="file" class="saude-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'saude', this)">
                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                    üì∑ Adicionar Fotos
                                </button>
                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                            </div>
                            <div class="saude-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                        </div>
                        <button type="button" onclick="this.parentElement.remove()" class="text-red-600 hover:text-red-800 text-sm mt-4">üóëÔ∏è Remover Unidade</button>
                    </div>
                `;
            } else if (tipo === 'transporte') {
                template = `
                    <div class="transporte-item p-4 bg-white rounded-lg border mb-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <input type="text" name="transporte_linha[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Linha/N√∫mero">
                            <input type="text" name="transporte_empresa[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Empresa">
                            <select name="transporte_tipo[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="">Tipo</option>
                                <option value="onibus">√înibus</option>
                                <option value="van">Van</option>
                                <option value="metro">Metr√¥</option>
                                <option value="trem">Trem</option>
                            </select>
                        </div>
                        <div class="border-t pt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos do Transporte</label>
                            <div class="flex items-center space-x-4">
                                <input type="file" class="transporte-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'transporte', this)">
                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-purple-100 hover:bg-purple-200 text-purple-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                    üì∑ Adicionar Fotos
                                </button>
                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                            </div>
                            <div class="transporte-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                        </div>
                        <button type="button" onclick="this.parentElement.remove()" class="text-red-600 hover:text-red-800 text-sm mt-4">üóëÔ∏è Remover Transporte</button>
                    </div>
                `;
            } else if (tipo === 'lazer') {
                template = `
                    <div class="lazer-item p-4 bg-white rounded-lg border mb-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <input type="text" name="lazer_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome do local">
                            <input type="text" name="lazer_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                            <input type="text" name="lazer_descricao[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Descri√ß√£o">
                        </div>
                        <div class="border-t pt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos da √Årea de Lazer</label>
                            <div class="flex items-center space-x-4">
                                <input type="file" class="lazer-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'lazer', this)">
                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-orange-100 hover:bg-orange-200 text-orange-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                    üì∑ Adicionar Fotos
                                </button>
                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                            </div>
                            <div class="lazer-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                        </div>
                        <button type="button" onclick="this.parentElement.remove()" class="text-red-600 hover:text-red-800 text-sm mt-4">üóëÔ∏è Remover √Årea de Lazer</button>
                    </div>
                `;
            } else if (tipo === 'religiosas') {
                template = `
                    <div class="religiosas-item p-4 bg-white rounded-lg border mb-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <input type="text" name="religiosas_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome da institui√ß√£o">
                            <input type="text" name="religiosas_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                            <select name="religiosas_tipo[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="">Tipo</option>
                                <option value="igreja">Igreja</option>
                                <option value="templo">Templo</option>
                                <option value="centro">Centro Esp√≠rita</option>
                                <option value="outros">Outros</option>
                            </select>
                        </div>
                        <div class="border-t pt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos da Institui√ß√£o Religiosa</label>
                            <div class="flex items-center space-x-4">
                                <input type="file" class="religiosas-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'religiosas', this)">
                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                    üì∑ Adicionar Fotos
                                </button>
                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                            </div>
                            <div class="religiosas-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                        </div>
                        <button type="button" onclick="this.parentElement.remove()" class="text-red-600 hover:text-red-800 text-sm mt-4">üóëÔ∏è Remover Institui√ß√£o</button>
                    </div>
                `;
            } else if (tipo === 'associacoes') {
                template = `
                    <div class="associacoes-item p-4 bg-white rounded-lg border mb-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <input type="text" name="associacoes_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome da associa√ß√£o">
                            <input type="text" name="associacoes_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                            <input type="text" name="associacoes_contato[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Contato">
                        </div>
                        <div class="border-t pt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos da Associa√ß√£o</label>
                            <div class="flex items-center space-x-4">
                                <input type="file" class="associacoes-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'associacoes', this)">
                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-teal-100 hover:bg-teal-200 text-teal-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                    üì∑ Adicionar Fotos
                                </button>
                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                            </div>
                            <div class="associacoes-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                        </div>
                        <button type="button" onclick="this.parentElement.remove()" class="text-red-600 hover:text-red-800 text-sm mt-4">üóëÔ∏è Remover Associa√ß√£o</button>
                    </div>
                `;
            } else if (tipo === 'comercios') {
                template = `
                    <div class="comercios-item p-4 bg-white rounded-lg border mb-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <input type="text" name="comercios_nome[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Nome do com√©rcio">
                            <input type="text" name="comercios_endereco[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg" placeholder="Endere√ßo">
                            <select name="comercios_tipo[]" class="input-field px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="">Tipo</option>
                                <option value="mercado">Mercado</option>
                                <option value="farmacia">Farm√°cia</option>
                                <option value="padaria">Padaria</option>
                                <option value="restaurante">Restaurante</option>
                                <option value="outros">Outros</option>
                            </select>
                        </div>
                        <div class="border-t pt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üì∏ Fotos do Com√©rcio</label>
                            <div class="flex items-center space-x-4">
                                <input type="file" class="comercios-photos hidden" multiple accept="image/*" onchange="handleEquipamentoPhotoUpload(event, 'comercios', this)">
                                <button type="button" onclick="this.previousElementSibling.click()" class="bg-yellow-100 hover:bg-yellow-200 text-yellow-700 px-4 py-2 rounded-lg text-sm font-medium transition-all">
                                    üì∑ Adicionar Fotos
                                </button>
                                <span class="text-sm text-gray-600">Selecione m√∫ltiplas imagens</span>
                            </div>
                            <div class="comercios-preview grid grid-cols-3 md:grid-cols-6 gap-2 mt-3"></div>
                        </div>
                        <button type="button" onclick="this.parentElement.remove()" class="text-red-600 hover:text-red-800 text-sm mt-4">üóëÔ∏è Remover Com√©rcio</button>
                    </div>
                `;
            }
            
            container.insertAdjacentHTML('beforeend', template);
        }

        function handlePhotoUpload(event) {
            const files = event.target.files;
            const preview = document.getElementById('photoPreview');
            
            for (let file of files) {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const photoDiv = document.createElement('div');
                        photoDiv.className = 'photo-preview relative';
                        photoDiv.innerHTML = `
                            <img src="${e.target.result}" class="w-full h-32 object-cover rounded-lg">
                            <button type="button" onclick="this.parentElement.remove()" class="absolute top-2 right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">√ó</button>
                            <p class="text-xs text-gray-600 mt-1">${file.name}</p>
                        `;
                        preview.appendChild(photoDiv);
                        
                        uploadedPhotos.push({
                            name: file.name,
                            data: e.target.result,
                            date: new Date().toISOString()
                        });
                    };
                    reader.readAsDataURL(file);
                }
            }
        }

        function handleEquipamentoPhotoUpload(event, tipo, inputElement) {
            const files = event.target.files;
            const equipamentoItem = inputElement.closest(`.${tipo}-item`);
            const preview = equipamentoItem.querySelector(`.${tipo}-preview`);
            
            for (let file of files) {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const photoDiv = document.createElement('div');
                        photoDiv.className = 'photo-preview relative';
                        photoDiv.innerHTML = `
                            <img src="${e.target.result}" class="w-full h-20 object-cover rounded-lg">
                            <button type="button" onclick="this.parentElement.remove()" class="absolute top-1 right-1 bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs">√ó</button>
                        `;
                        preview.appendChild(photoDiv);
                        
                        // Armazenar foto com refer√™ncia ao equipamento
                        if (!equipamentoItem.equipamentoPhotos) {
                            equipamentoItem.equipamentoPhotos = [];
                        }
                        equipamentoItem.equipamentoPhotos.push({
                            name: file.name,
                            data: e.target.result,
                            date: new Date().toISOString(),
                            tipo: tipo
                        });
                    };
                    reader.readAsDataURL(file);
                }
            }
        }

        function limparFormulario() {
            if (confirm('Tem certeza que deseja limpar todos os dados do formul√°rio?')) {
                document.getElementById('frenteForm').reset();
                document.getElementById('photoPreview').innerHTML = '';
                uploadedPhotos = [];
                
                // Esconder campos condicionais
                document.getElementById('nomeComunidadeDiv').classList.add('hidden');
                document.getElementById('tipoConstrucaoDiv').classList.add('hidden');
                document.getElementById('quantidadeMoradiasDiv').classList.add('hidden');
            }
        }



        // Manipula√ß√£o de dados
        document.getElementById('frenteForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const editingId = this.dataset.editingId;
            
            if (editingId) {
                // Modo edi√ß√£o - atualizar frente existente
                const frenteIndex = frentes.findIndex(f => f.id == editingId);
                if (frenteIndex !== -1) {
                    frentes[frenteIndex] = {
                        ...frentes[frenteIndex], // Manter dados existentes
                        codigo: formData.get('codigo'),
                        corpoHidrico: formData.get('corpoHidrico'),
                        municipio: formData.get('municipio'),
                        bairro: formData.get('bairro'),
                        dataVisita: formData.get('dataVisita'),
                        tecnicaSocial: formData.get('tecnicaSocial'),
                        comunidadeEntorno: formData.get('comunidadeEntorno'),
                        nomeComunidade: formData.get('nomeComunidade'),
                        fotos: [...uploadedPhotos] // Atualizar fotos se houver
                    };
                    
                    // Mostrar mensagem de sucesso
                    const successDiv = document.createElement('div');
                    successDiv.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                    successDiv.innerHTML = `‚úÖ Frente ${frentes[frenteIndex].codigo} atualizada com sucesso!`;
                    document.body.appendChild(successDiv);
                    
                    setTimeout(() => {
                        successDiv.remove();
                    }, 4000);
                    
                    // Cancelar modo de edi√ß√£o
                    cancelarEdicao();
                    
                    // Atualizar tabelas
                    atualizarTabelaFrente();
                    atualizarDashboard();
                    
                    // Voltar para lista de frentes
                    showSection('listar-frentes');
                }
            } else {
                // Modo cria√ß√£o - criar nova frente
                const novaFrente = {
                    id: frentes.length + 1,
                    codigo: formData.get('codigo'),
                    corpoHidrico: formData.get('corpoHidrico'),
                    municipio: formData.get('municipio'),
                    bairro: formData.get('bairro'),
                    dataVisita: formData.get('dataVisita'),
                    status: 'Conclu√≠do',
                    tecnicaSocial: formData.get('tecnicaSocial'),
                    comunidadeEntorno: formData.get('comunidadeEntorno'),
                    nomeComunidade: formData.get('nomeComunidade'),
                    fotos: [...uploadedPhotos]
                };
                
                frentes.push(novaFrente);
                
                // Mostrar mensagem de sucesso
                const successDiv = document.createElement('div');
                successDiv.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                successDiv.innerHTML = `‚úÖ Frente ${novaFrente.codigo} salva com sucesso!`;
                document.body.appendChild(successDiv);
                
                setTimeout(() => {
                    successDiv.remove();
                }, 3000);
                
                // Limpar formul√°rio
                limparFormulario();
                
                // Atualizar dashboard
                atualizarDashboard();
                
                // Ir para o dashboard
                showSection('dashboard');
            }
        });

        document.getElementById('usuarioForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const novoUsuario = {
                id: usuarios.length + 1,
                nome: formData.get('nomeUsuario'),
                email: formData.get('emailUsuario'),
                perfil: formData.get('perfilUsuario'),
                status: 'Ativo'
            };
            
            usuarios.push(novoUsuario);
            this.reset();
            atualizarTabelaUsuarios();
            
            // Mostrar mensagem de sucesso
            const successDiv = document.createElement('div');
            successDiv.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            successDiv.innerHTML = '‚úÖ Usu√°rio adicionado com sucesso!';
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        });

        function atualizarTabelaFrente() {
            const tbody = document.getElementById('frentesTableBody');
            tbody.innerHTML = '';
            
            frentes.forEach(frente => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${frente.codigo}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${frente.corpoHidrico}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${frente.municipio}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${new Date(frente.dataVisita).toLocaleDateString('pt-BR')}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${frente.status === 'Conclu√≠do' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                            ${frente.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="visualizarFrente(${frente.id})" class="text-blue-600 hover:text-blue-900 mr-3">Ver</button>
                        <button onclick="editarFrente(${frente.id})" class="text-indigo-600 hover:text-indigo-900 mr-3">Editar</button>
                        <button onclick="excluirFrente(${frente.id})" class="text-red-600 hover:text-red-900">Excluir</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function atualizarTabelaUsuarios() {
            const tbody = document.getElementById('usuariosTableBody');
            tbody.innerHTML = '';
            
            usuarios.forEach(usuario => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${usuario.nome}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${usuario.email}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${usuario.perfil}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                            ${usuario.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="editarUsuario(${usuario.id})" class="text-indigo-600 hover:text-indigo-900 mr-3">Editar</button>
                        <button onclick="excluirUsuario(${usuario.id})" class="text-red-600 hover:text-red-900">Excluir</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function atualizarDashboard() {
            document.getElementById('totalFrentes').textContent = frentes.length;
            document.getElementById('totalComunidades').textContent = frentes.filter(f => f.comunidadeEntorno === 'sim').length;
        }

        // A√ß√µes
        function visualizarFrente(id) {
            const frente = frentes.find(f => f.id === id);
            if (frente) {
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
                modal.innerHTML = `
                    <div class="bg-white rounded-lg p-6 max-w-2xl w-full max-h-full overflow-y-auto">
                        <h3 class="text-xl font-bold mb-4">Detalhes da Frente ${frente.codigo}</h3>
                        <div class="space-y-3">
                            <p><strong>Corpo H√≠drico:</strong> ${frente.corpoHidrico}</p>
                            <p><strong>Munic√≠pio:</strong> ${frente.municipio}</p>
                            <p><strong>Bairro:</strong> ${frente.bairro}</p>
                            <p><strong>Data da Visita:</strong> ${new Date(frente.dataVisita).toLocaleDateString('pt-BR')}</p>
                            <p><strong>T√©cnica Social:</strong> ${frente.tecnicaSocial}</p>
                            <p><strong>Comunidade no Entorno:</strong> ${frente.comunidadeEntorno === 'sim' ? 'Sim' : 'N√£o'}</p>
                            ${frente.nomeComunidade ? `<p><strong>Nome da Comunidade:</strong> ${frente.nomeComunidade}</p>` : ''}
                        </div>
                        <button onclick="this.parentElement.parentElement.remove()" class="mt-6 bg-blue-600 text-white px-4 py-2 rounded-lg">Fechar</button>
                    </div>
                `;
                document.body.appendChild(modal);
            }
        }

        function editarFrente(id) {
            const frente = frentes.find(f => f.id === id);
            if (!frente) return;
            
            // Preencher formul√°rio com dados da frente
            const form = document.getElementById('frenteForm');
            form.querySelector('[name="codigo"]').value = frente.codigo;
            form.querySelector('[name="corpoHidrico"]').value = frente.corpoHidrico;
            form.querySelector('[name="municipio"]').value = frente.municipio;
            form.querySelector('[name="bairro"]').value = frente.bairro;
            form.querySelector('[name="dataVisita"]').value = frente.dataVisita;
            form.querySelector('[name="tecnicaSocial"]').value = frente.tecnicaSocial;
            form.querySelector('[name="comunidadeEntorno"]').value = frente.comunidadeEntorno || '';
            form.querySelector('[name="nomeComunidade"]').value = frente.nomeComunidade || '';
            
            // Mostrar campos condicionais se necess√°rio
            if (frente.comunidadeEntorno === 'sim') {
                document.getElementById('nomeComunidadeDiv').classList.remove('hidden');
            }
            
            // Adicionar ID da frente sendo editada ao formul√°rio
            form.dataset.editingId = id;
            
            // Alterar texto do bot√£o de submit
            const submitBtn = form.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '‚úèÔ∏è Atualizar Frente de Trabalho';
            submitBtn.className = 'bg-orange-600 hover:bg-orange-700 text-white px-8 py-3 rounded-lg font-medium transition-all flex-1';
            
            // Adicionar bot√£o de cancelar edi√ß√£o
            const cancelBtn = document.createElement('button');
            cancelBtn.type = 'button';
            cancelBtn.className = 'bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-lg font-medium transition-all';
            cancelBtn.innerHTML = '‚ùå Cancelar Edi√ß√£o';
            cancelBtn.onclick = cancelarEdicao;
            
            const buttonContainer = submitBtn.parentElement;
            if (!buttonContainer.querySelector('.cancel-edit-btn')) {
                cancelBtn.classList.add('cancel-edit-btn');
                buttonContainer.insertBefore(cancelBtn, submitBtn.nextSibling);
            }
            
            // Ir para a se√ß√£o de nova frente
            showSection('nova-frente');
            
            // Scroll para o topo
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Mostrar mensagem de edi√ß√£o
            const editMsg = document.createElement('div');
            editMsg.className = 'fixed top-4 right-4 bg-orange-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            editMsg.innerHTML = `‚úèÔ∏è Editando Frente ${frente.codigo} - ${frente.corpoHidrico}`;
            document.body.appendChild(editMsg);
            
            setTimeout(() => {
                editMsg.remove();
            }, 4000);
        }
        
        function cancelarEdicao() {
            const form = document.getElementById('frenteForm');
            
            // Limpar formul√°rio
            form.reset();
            document.getElementById('photoPreview').innerHTML = '';
            uploadedPhotos = [];
            
            // Esconder campos condicionais
            document.getElementById('nomeComunidadeDiv').classList.add('hidden');
            document.getElementById('tipoConstrucaoDiv').classList.add('hidden');
            document.getElementById('quantidadeMoradiasDiv').classList.add('hidden');
            
            // Remover ID de edi√ß√£o
            delete form.dataset.editingId;
            
            // Restaurar bot√£o original
            const submitBtn = form.querySelector('button[type="submit"]');
            submitBtn.innerHTML = 'üíæ Salvar Frente de Trabalho';
            submitBtn.className = 'btn-primary text-white px-8 py-3 rounded-lg font-medium flex-1';
            
            // Remover bot√£o de cancelar
            const cancelBtn = form.querySelector('.cancel-edit-btn');
            if (cancelBtn) {
                cancelBtn.remove();
            }
            
            // Mostrar mensagem
            const cancelMsg = document.createElement('div');
            cancelMsg.className = 'fixed top-4 right-4 bg-gray-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            cancelMsg.innerHTML = '‚ùå Edi√ß√£o cancelada';
            document.body.appendChild(cancelMsg);
            
            setTimeout(() => {
                cancelMsg.remove();
            }, 3000);
        }

        function excluirFrente(id) {
            if (confirm('Tem certeza que deseja excluir esta frente?')) {
                frentes = frentes.filter(f => f.id !== id);
                atualizarTabelaFrente();
                atualizarDashboard();
            }
        }

        function editarUsuario(id) {
            alert('Funcionalidade de edi√ß√£o ser√° implementada');
        }

        function excluirUsuario(id) {
            if (confirm('Tem certeza que deseja excluir este usu√°rio?')) {
                usuarios = usuarios.filter(u => u.id !== id);
                atualizarTabelaUsuarios();
            }
        }

        function aplicarFiltros() {
            // Implementar filtros
            alert('Filtros aplicados com sucesso!');
        }







        function logout() {
            if (confirm('Tem certeza que deseja sair do sistema?')) {
                alert('Logout realizado com sucesso!');
            }
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            showSection('dashboard');
            atualizarDashboard();
        });
    </script>
<script>
//(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script'); d.innerHTML="window.__CF$cv$params={r:'98f0eb4302736246',t:'MTc2MDU0ODExMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();
</script>

<script>
document.getElementById("frenteForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const form = e.target;
  const formData = new FormData(form);
  const dados = {};

  formData.forEach((valor, chave) => {
    if (dados[chave]) {
      if (!Array.isArray(dados[chave])) dados[chave] = [dados[chave]];
      dados[chave].push(valor);
    } else {
      dados[chave] = valor;
    }
  });

  // Coleta as fotos gerais
  dados.fotosBase64 = await coletarFotosBase64(document.getElementById("photoUpload"));

  // Coleta os equipamentos (cada grupo)
  const grupos = ["escolas", "saude", "transporte", "lazer", "religiosas", "associacoes", "comercios"];
  grupos.forEach(grupo => {
    dados[grupo] = coletarEquipamentos(grupo);
  });

  try {
    const resposta = await fetch("https://script.google.com/macros/s/AKfycbyKixvr1ekO-D0_yk86TOQg_swp-USLsKgb0Gb7Kw-_QrkyoaOo-R_Wv20jG5XVbBF7LA/exec", { // URL do seu Apps Script
      method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(dados)
    });

    const resultado = await resposta.json();
    alert(resultado.mensagem || "‚úÖ Frente salva com sucesso!");
    form.reset();

  } catch (erro) {
    console.error("Erro ao enviar:", erro);
    alert("‚ö†Ô∏è Falha ao enviar dados. Verifique sua conex√£o ou tente novamente.");
  }
});

// === FUN√á√ïES DE APOIO ===
async function coletarFotosBase64(input) {
  const arquivos = input.files;
  const lista = [];
  for (const file of arquivos) {
    const base64 = await toBase64(file);
    lista.push(base64);
  }
  return lista;
}

function coletarEquipamentos(grupo) {
  const itens = [];
  document.querySelectorAll(`#${grupo}Container .${grupo}-item`).forEach(item => {
    const obj = {};
    item.querySelectorAll("input, select, textarea").forEach(el => {
      const name = el.name.replace("[]", "").split("_")[1] || el.name.replace("[]", "");
      obj[name] = el.value;
    });
    const inputFotos = item.querySelector(`.${grupo}-photos`);
    obj.fotosBase64 = inputFotos && inputFotos.files.length ? Array.from(inputFotos.files).map(f => f._base64 || '') : [];
    itens.push(obj);
  });
  return itens;
}

function toBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}
</script>


</body>
</html>

